---
kind: pipeline
name: run-shellcheck

steps:
- name: build
  image: koalaman/shellcheck-alpine
  commands:
  - shellcheck -s sh -f checkstyle bootstrap-salt.sh
  when:
    event:
    - pull_request

---
kind: pipeline
name: build-centos7

steps:
- name: build
  image: saltstack/drone-plugin-kitchen
  privileged: true
  settings:
    target: centos-7
    requirements: tests/requirements.txt
  when:
    event:
    - pull_request

depends_on:
- run-shellcheck

---
kind: pipeline
name: build-amazon1

steps:
- name: build
  image: saltstack/drone-plugin-kitchen
  privileged: true
  settings:
    target: amazon-1
    requirements: tests/requirements.txt
  when:
    event:
    - pull_request

depends_on:
- run-shellcheck

---
kind: pipeline
name: build-amazon2

steps:
- name: build
  image: saltstack/drone-plugin-kitchen
  privileged: true
  settings:
    target: amazon-2
    requirements: tests/requirements.txt
  when:
    event:
    - pull_request

depends_on:
- run-shellcheck

---
kind: pipeline
name: build-debian8

steps:
- name: build
  image: saltstack/drone-plugin-kitchen
  privileged: true
  failure: ignore
  settings:
    target: debian-8
    requirements: tests/requirements.txt
  when:
    event:
    - pull_request

depends_on:
- run-shellcheck

---
kind: pipeline
name: build-debian9

steps:
- name: build
  image: saltstack/drone-plugin-kitchen
  privileged: true
  failure: ignore
  settings:
    target: debian-9
    requirements: tests/requirements.txt
  when:
    event:
    - pull_request

depends_on:
- run-shellcheck

---
kind: pipeline
name: build-fedora

steps:
- name: build
  image: saltstack/drone-plugin-kitchen
  privileged: true
  settings:
    target: fedora
    requirements: tests/requirements.txt
  when:
    event:
    - pull_request

depends_on:
- run-shellcheck

---
kind: pipeline
name: build-opensuse

steps:
- name: build
  image: saltstack/drone-plugin-kitchen
  privileged: true
  settings:
    target: opensuse
    requirements: tests/requirements.txt
  when:
    event:
    - pull_request

depends_on:
- run-shellcheck

---
kind: pipeline
name: build-ubuntu1804

steps:
- name: build
  image: saltstack/drone-plugin-kitchen
  privileged: true
  settings:
    target: ubuntu-1804
    requirements: tests/requirements.txt
  when:
    event:
    - pull_request

depends_on:
- run-shellcheck


---
kind: signature
hmac: a31505227173366492f3e1f12de826593b380306a1bb735d36c2b85d770bea8f

...
